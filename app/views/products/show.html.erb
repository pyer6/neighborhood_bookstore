<div class="col-md-6 offset-md-3">
  <h2 class="text-center">商品情報</h2>
  <div class="p-4 text-center">
    <% if @product.img? %>
      <%= image_tag @product.img.url, alt: "書籍の画像です。", :width => "100%" %>
    <% else %>
      <%= image_tag "no-img.png", alt: "画像が登録されていません。", :width => "100%" %>
    <% end %>
  </div>
  <div class="pl-5">
    <div>タイトル: <%= @product.name %></div>
    <div>著者: <%= @product.author %></div>
    <div>価格: ¥<%= @product.price %></div>
    <div>在庫数: <%= @product.num %></div>
    <div>説明: <%= @product.description %></div>

    <% unless current_user.admin? %>
      <div>
        <%= form_with(model: current_user.cart.cart_products.build, url: carts_add_path, local: true ) do |f| %>
          <%= render "layouts/error_messages", model: f.object %>
          <div class="form-group">
            <%= f.label :quantity, "購入数" %>
            <%= f.number_field :quantity, :value => 1 %>
          </div>
          <%= f.hidden_field :product_id, :value => @product.id %>
          <%= f.hidden_field :product_num, :value => @product.num %>
          <div class="text-right">
            <%= f.submit "カートに入れる", class: "btn btn-info" %>
          </div>
        <% end %>
      </div>
    <% else %>
      <section class="text-right py-3">
        <%= link_to "編集", edit_product_path(@product), class: "btn btn-edit"%>
        <%= link_to '削除', product_path(@product), class: "btn btn-delete", method: :delete, data: { confirm: "削除してもよろしいですか？"}  %>
      </section>
    <% end %>
  </div>
</div>